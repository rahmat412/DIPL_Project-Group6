{"ast":null,"code":"import _asyncToGenerator from \"D:/Project/temp_rns/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport \"regenerator-runtime/runtime.js\";\nimport useValidate from '@vuelidate/core';\nimport { required, email, minLength } from '@vuelidate/validators';\nimport { reactive, computed } from 'vue';\nimport axios from \"axios\";\nimport Swal from 'sweetalert2';\nexport default {\n  setup: function setup() {\n    var state = reactive({\n      email: \"\",\n      password: \"\"\n    });\n    var rules = computed(function () {\n      return {\n        email: {\n          required: required,\n          email: email\n        },\n        password: {\n          required: required,\n          minLength: minLength(6)\n        }\n      };\n    });\n    var v$ = useValidate(rules, state);\n    return {\n      state: state,\n      v$: v$\n    };\n  },\n  methods: {\n    LogIn: function LogIn() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this.v$.$validate();\n\n                if (!_this.v$.$error) {\n                  _context.next = 3;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 3:\n                _context.prev = 3;\n                _context.next = 6;\n                return axios.post(\"http://localhost:5000/login\", {\n                  email: _this.email,\n                  password: _this.password\n                }).then(function (response) {\n                  var role = response.data.role;\n                  localStorage.setItem('user', response.data.user);\n                  localStorage.setItem('role', response.data.role);\n                  localStorage.setItem('jwt', response.data.token);\n\n                  _this.sAlert(\"success\", \"Success\", \"Login Success\");\n\n                  if (role == 1) {\n                    _this.$router.push(\"/admin\");\n                  } else if (role == 2) {\n                    _this.$router.push(\"/profile\");\n                  } else if (role == 3) {\n                    _this.$router.push(\"/profile\");\n                  } else {\n                    _this.$router.push(\"/admin\");\n                  }\n                });\n\n              case 6:\n                _context.next = 12;\n                break;\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](3);\n                console.log(_context.t0);\n\n                _this.sAlert(\"error\", \"Login Failed\", \"Invalid Email or Password\");\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[3, 8]]);\n      }))();\n    },\n    sAlert: function sAlert(ico, tit, txt) {\n      Swal.fire({\n        icon: ico,\n        title: tit,\n        text: txt,\n        showConfirmButton: false,\n        timer: 1000\n      });\n    }\n  }\n};","map":{"version":3,"sources":["D:\\Project\\temp_rns\\frontend\\src\\views\\auth\\Login.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"container mx-auto px-4 h-full\">\n    <div class=\"flex content-center items-center justify-center h-full\">\n      <div class=\"w-full lg:w-4/12 px-4\">\n        <div\n          class=\"relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded-lg bg-blueGray-200 border-0\"\n        >\n          <div class=\"rounded-t mb-0 px-6 py-6\">\n            <div class=\"text-center mb-3\">\n              <h6 class=\"text-blueGray-500 text-sm font-bold\">\n                Log in\n              </h6>\n            </div>\n            <hr class=\"mt-6 border-b-1 border-blueGray-300\" />\n          </div>\n          <div class=\"flex-auto px-4 lg:px-10 py-10 pt-0\">\n            <form>\n              <div class=\"relative w-full mb-3\">\n                <label\n                  class=\"block uppercase text-blueGray-600 text-xs font-bold mb-2\"\n                  htmlFor=\"grid-password\"\n                >\n                  Email\n                </label>\n                <input\n                  type=\"email\"\n                  class=\"border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150\"\n                  placeholder=\"Email\"\n                  v-model=\"state.email\"\n                />\n                <div v-if=\"v$.email.$error\">\n                  <span v-if=\"v$.email.required\" class=\"text-sm px-2 text-red-500\">Email is required</span>\n                  <span v-if=\"v$.email.email\" class=\"text-sm px-2 text-red-500\">Email is not valid</span>\n                </div>\n              </div>\n\n              <div class=\"relative w-full mb-3\">\n                <label\n                  class=\"block uppercase text-blueGray-600 text-xs font-bold mb-2\"\n                  htmlFor=\"grid-password\"\n                >\n                  Password\n                </label>\n                <input\n                  type=\"password\"\n                  class=\"border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150\"\n                  placeholder=\"Password\"\n                  v-model=\"state.password\"\n                />\n                <div v-if=\"v$.email.$error\">\n                  <span v-if=\"v$.password.$error\" class=\"text-sm px-2 text-red-500\">Password is required</span>\n                  <span v-if=\"v$.password.minLength\">Password must be at least 6 characters</span>\n                </div>\n              </div>\n              <div class=\"text-center mt-6\">\n                <button\n                  @click=\"LogIn\"\n                  class=\"bg-blueGray-800 text-white active:bg-blueGray-600 text-sm font-bold uppercase px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 w-full ease-linear transition-all duration-150\"\n                  type=\"button\"\n                >\n                  Log In\n                </button>\n              </div>\n            </form>\n            <div class=\"flex flex-wrap mt-6 relative\">\n              <div class=\"w-full text-right\">\n                <small>Don't have an account? </small>\n                <router-link to=\"/auth/register\" class=\"text-blueGray-600 font-bold\">\n                  <small>Register</small>\n                </router-link>\n                \n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport useValidate from '@vuelidate/core';\nimport { required, email, minLength } from '@vuelidate/validators';\nimport { reactive, computed } from 'vue';\nimport axios from \"axios\";\nimport Swal from 'sweetalert2';\nexport default {\n  setup(){\n    const state = reactive ({\n      email: \"\",\n      password: \"\",\n    })\n    const rules = computed(() => {\n      return {\n        email: { required, email },\n        password: { required, minLength: minLength(6) },\n      }\n    })\n    const v$ = useValidate(rules,state)\n    return {\n      state,\n      v$,\n    }\n  },\n  methods : {\n    async LogIn (){\n      this.v$.$validate()\n      if (this.v$.$error) {\n        return\n      }\n      try{\n        await axios.post(\"http://localhost:5000/login\", {\n          email: this.email,\n          password: this.password\n        })\n        .then(response => {   \n          let role = response.data.role;\n          localStorage.setItem('user',response.data.user);\n          localStorage.setItem('role',response.data.role);\n          localStorage.setItem('jwt',response.data.token);\n          this.sAlert(\"success\",\"Success\",\"Login Success\")\n          if(role == 1){\n            this.$router.push(\"/admin\");\n          } else if(role == 2){\n            this.$router.push(\"/profile\");\n          } else if(role == 3){\n            this.$router.push(\"/profile\");\n          } else {\n            this.$router.push(\"/admin\");\n          }\n        })\n      } catch (err) {\n        console.log(err);\n        this.sAlert(\"error\",\"Login Failed\",\"Invalid Email or Password\")\n      }\n    },\n    sAlert: function(ico, tit, txt) {\n      Swal.fire({\n        icon: ico,\n        title: tit,\n        text: txt,\n        showConfirmButton: false,\n        timer: 1000\n      });\n    }\n  },\n};\n</script>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}