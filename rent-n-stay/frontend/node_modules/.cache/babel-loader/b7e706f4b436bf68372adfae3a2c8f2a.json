{"ast":null,"code":"import _asyncToGenerator from \"D:/Project/temp_rns/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport \"regenerator-runtime/runtime.js\";\nimport axios from \"axios\";\nimport { required } from \"vuelidate/lib/validators/index.js\";\nexport default {\n  data: function data() {\n    return {\n      email: \"\",\n      password: \"\",\n      submitted: false,\n      error: \"\"\n    };\n  },\n  validations: {\n    email: {\n      required: required\n    },\n    password: {\n      required: required\n    }\n  },\n  methods: {\n    SignIn: function SignIn() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axios.post(\"http://localhost:5000/login\", {\n                  email: _this.email,\n                  password: _this.password\n                }).then(function (response) {\n                  if (response.message != null) {\n                    _this.error = response.message;\n                  }\n\n                  var role = response.data.user.role;\n                  localStorage.setItem('user', JSON.stringify(response.data.user.role));\n                  localStorage.setItem('jwt', response.data.token);\n\n                  if (localStorage.getItem('jwt') != null) {\n                    if (_this.$route.params.nextUrl != null) {\n                      _this.$router.push(_this.$route.params.nextUrl);\n                    } else {\n                      if (role == 1) {\n                        _this.$router.push(\"/admin\");\n                      } else {\n                        _this.$router.push(\"/\");\n                      }\n                    }\n                  }\n                }).catch(function (error) {\n                  console.error(error.response);\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    }\n  }\n};","map":{"version":3,"sources":["D:\\Project\\temp_rns\\frontend\\src\\views\\auth\\Login.vue"],"names":[],"mappings":";;AAiFA,OAAO,KAAP,MAAkB,OAAlB;AACA,SAAS,QAAT,QAAyB,mCAAzB;AACA,eAAe;AACb,EAAA,IADa,kBACP;AACJ,WAAO;AACL,MAAA,KAAI,EAAI,EADH;AAEL,MAAA,QAAO,EAAI,EAFN;AAGL,MAAA,SAAS,EAAE,KAHN;AAIL,MAAA,KAAK,EAAE;AAJF,KAAP;AAMD,GARY;AASb,EAAA,WAAW,EAAE;AACX,IAAA,KAAK,EAAE;AAAE,MAAA,QAAO,EAAP;AAAF,KADI;AAEX,IAAA,QAAQ,EAAE;AAAE,MAAA,QAAO,EAAP;AAAF;AAFC,GATA;AAab,EAAA,OAAM,EAAI;AACF,IAAA,MADE,oBACO;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEL,KAAK,CAAC,IAAN,CAAW,6BAAX,EAA0C;AAC9C,kBAAA,KAAK,EAAE,KAAI,CAAC,KADkC;AAE9C,kBAAA,QAAQ,EAAE,KAAI,CAAC;AAF+B,iBAA1C,EAIL,IAJK,CAIA,UAAA,QAAO,EAAK;AAChB,sBAAG,QAAQ,CAAC,OAAT,IAAkB,IAArB,EAA0B;AACxB,oBAAA,KAAI,CAAC,KAAL,GAAa,QAAQ,CAAC,OAAtB;AACF;;AACA,sBAAI,IAAG,GAAI,QAAQ,CAAC,IAAT,CAAc,IAAd,CAAmB,IAA9B;AACA,kBAAA,YAAY,CAAC,OAAb,CAAqB,MAArB,EAA4B,IAAI,CAAC,SAAL,CAAe,QAAQ,CAAC,IAAT,CAAc,IAAd,CAAmB,IAAlC,CAA5B;AACA,kBAAA,YAAY,CAAC,OAAb,CAAqB,KAArB,EAA2B,QAAQ,CAAC,IAAT,CAAc,KAAzC;;AACA,sBAAI,YAAY,CAAC,OAAb,CAAqB,KAArB,KAA+B,IAAnC,EAAwC;AACtC,wBAAG,KAAI,CAAC,MAAL,CAAY,MAAZ,CAAmB,OAAnB,IAA8B,IAAjC,EAAsC;AACpC,sBAAA,KAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,KAAI,CAAC,MAAL,CAAY,MAAZ,CAAmB,OAArC;AACF,qBAFA,MAEO;AACL,0BAAG,IAAI,IAAE,CAAT,EAAW;AACT,wBAAA,KAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,QAAlB;AACF,uBAFA,MAEO;AACL,wBAAA,KAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,GAAlB;AACF;AACF;AACF;AACD,iBAtBK,EAuBL,KAvBK,CAuBC,UAAU,KAAV,EAAiB;AACtB,kBAAA,OAAO,CAAC,KAAR,CAAc,KAAK,CAAC,QAApB;AACD,iBAzBK,CAFK;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA4Bd;AA7BO;AAbG,CAAf","sourcesContent":["<template>\n  <div class=\"container mx-auto px-4 h-full\">\n    <div class=\"flex content-center items-center justify-center h-full\">\n      <div class=\"w-full lg:w-4/12 px-4\">\n        <div\n          class=\"relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded-lg bg-blueGray-200 border-0\"\n        >\n          <div class=\"rounded-t mb-0 px-6 py-6\">\n            <div class=\"text-center mb-3\">\n              <h6 class=\"text-blueGray-500 text-sm font-bold\">\n                Sign in\n              </h6>\n            </div>\n            <hr class=\"mt-6 border-b-1 border-blueGray-300\" />\n          </div>\n          <div class=\"flex-auto px-4 lg:px-10 py-10 pt-0\">\n            <form>\n              <div class=\"relative w-full mb-3\">\n                <label\n                  class=\"block uppercase text-blueGray-600 text-xs font-bold mb-2\"\n                  htmlFor=\"grid-password\"\n                >\n                  Email\n                </label>\n                <input\n                  type=\"email\"\n                  class=\"border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150\"\n                  placeholder=\"Email\"\n                  \n                  v-model=\"email\"\n                />\n                <!-- <div v-if=\"submitted && !$v.email.required\" class=\"invalid-feedback\">Email is required</div> -->\n              </div>\n\n              <div class=\"relative w-full mb-3\">\n                <label\n                  class=\"block uppercase text-blueGray-600 text-xs font-bold mb-2\"\n                  htmlFor=\"grid-password\"\n                >\n                  Password\n                </label>\n                <input\n                  type=\"password\"\n                  class=\"border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150\"\n                  placeholder=\"Password\"\n                  \n                  v-model=\"password\"\n                />\n                <!-- <div v-if=\"submitted && !$v.password.required\" class=\"invalid-feedback\">Password is required</div> -->\n              </div>\n              <div class=\"text-center mt-6\">\n                <button\n                  @click=\"SignIn\"\n                  class=\"bg-blueGray-800 text-white active:bg-blueGray-600 text-sm font-bold uppercase px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 w-full ease-linear transition-all duration-150\"\n                  type=\"button\"\n                >\n                  Sign In\n                </button>\n              </div>\n              <!-- <div v-if=\"error\" class=\"alert alert-danger\">{{error}}</div> -->\n            </form>\n            <div class=\"flex flex-wrap mt-6 relative\">\n              <div class=\"w-1/2\">\n                <a href=\"javascript:void(0)\" class=\"text-blueGray-200\">\n              \n                </a>\n              </div>\n              <div class=\"w-1/2 text-right\">\n                <small>Don't have an account? </small>\n                <router-link to=\"/auth/register\" class=\"text-blueGray-600 font-bold\">\n                  <small>Sign up</small>\n                </router-link>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport axios from \"axios\";\nimport { required } from \"vuelidate/lib/validators/index.js\";\nexport default {\n  data(){\n    return {\n      email : \"\",\n      password : \"\",\n      submitted: false,\n      error: \"\"\n    }\n  },\n  validations: {\n    email: { required },\n    password: { required }\n  },\n  methods : {\n    async SignIn() {\n        // this.submitted = true;\n        await axios.post(\"http://localhost:5000/login\", {\n          email: this.email,\n          password: this.password\n        })\n        .then(response => {\n          if(response.message!=null){\n            this.error = response.message;\n          }\n          let role = response.data.user.role;\n          localStorage.setItem('user',JSON.stringify(response.data.user.role));\n          localStorage.setItem('jwt',response.data.token);\n          if (localStorage.getItem('jwt') != null){\n            if(this.$route.params.nextUrl != null){\n              this.$router.push(this.$route.params.nextUrl);\n            } else {\n              if(role==1){\n                this.$router.push(\"/admin\");\n              } else {\n                this.$router.push(\"/\");\n              }\n            }\n          }\n        })\n        .catch(function (error) {\n          console.error(error.response);\n        });\n    },\n  },\n};\n</script>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}